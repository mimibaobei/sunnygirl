<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>sunnygirl</title>
    <style>
        body {
            margin: 0;
            width: 100%;
            height: 100%;
            text-align: center;
        }

        canvas {
            display: block;
            margin:auto;
        }
    </style>
</head>
<body>
<canvas id="animation"></canvas>
<script>
    var context = document.getElementById("animation");
    var ctx = context.getContext("2d");
    var tree = new Image();
    tree.src = "img/tree.png";
    var feng1 = new Image();
    feng1.src = "img/feng1.png";
    var feng2 = new Image();
    feng2.src = "img/feng2.png";
    var feng3 = new Image();
    feng3.src = "img/feng3.png";
    var indicator = new Image();
    indicator.src = "img/indicator.png";
    var come = new Image();
    come.src = "img/welcome.png";
    var xratio=document.documentElement.clientWidth/1600;
    var yratio= document.documentElement.clientHeight/794;
window.onload=function () {
    var mu = 0;
    resizeCanvas();
    aim();
    opacity(mu);
    function resizeCanvas() {
        context.width =document.documentElement.clientWidth;
        context.height =document.documentElement.clientHeight;
    }

    function aim() {
        ctx.drawImage(tree, 200*xratio, 0*yratio, 1200*xratio, 794*yratio);
        setTimeout(leaf, 1000);
    };

    function opacity(tag) {
        context.style.opacity = tag;
        tag = tag + 0.1;
        if (tag < 1.1) {
            setTimeout(opacity, 100,tag);
        }
    }

    var x, y;

    function leaf() {
        var num = 0;
        emergr1();
        function emergr1() {
            if (num === 500) {
                welcome();
            }
            coordinate();
            ctx.drawImage(feng1, x, y, 100*xratio, 80*yratio);
            num++;
            if (num < 500) {
                setTimeout(emergr1, 1);
            }
        };
        emergr3();
        function emergr3() {
            coordinate();
            ctx.drawImage(feng3, x, y, 100*xratio, 80*yratio);
            num++;
            if (num < 510) {
                setTimeout(emergr3, 1);
            }
        };
        edge();
        function edge() {
            ctx.drawImage(feng2, 420*xratio, 80*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng2, 360*xratio, 125*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng2, 320*xratio, 170*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng2, 280*xratio, 230*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng2, 250*xratio, 280*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng2, 280*xratio, 380*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng1, 500*xratio, 55*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng1, 570*xratio, 45*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng1, 650*xratio, 42*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng1, 720*xratio, 40*yratio, 100*xratio, 80*yratio);
            ctx.drawImage(feng3, 380*xratio, 100*yratio, 100*xratio, 80*yratio);
        };
    }

    function coordinate() {
        var x1 = Math.floor(Math.random() * (1070) *xratio+ 280*xratio);
        var y1 = Math.floor(Math.random() * (419)*yratio + 60*yratio);
        if ((y1 >= 60*yratio && y1 < 170*yratio) && (x1 >= 430*xratio && x1 <= 920*xratio)) {
            x = x1;
            y = y1;
        } else if ((y1 >= 170*yratio && y1 < 220*yratio) && (x1 >= 320*xratio && x1 <= 1100*xratio)) {
            x = x1;
            y = y1;
        } else if ((y1 >= 220*yratio && y1 < 320*yratio) && (x1 >= 280*xratio && x1 <= 1280*xratio)) {
            x = x1;
            y = y1;
        } else if ((y1 >= 320*yratio && y1 < 360*yratio) && (x1 >= 280*xratio && x1 <= 1350*xratio)) {
            x = x1;
            y = y1;
        } else if ((y1 >= 360*yratio && y1 < 440*yratio) && (x1 >= 320*xratio && x1 <= 1200*xratio)) {
            x = x1;
            y = y1;
        } else if ((y1 >= 440*yratio && y1 < 478*yratio) && (x1 >= 380 *xratio&& x1 <= 860*xratio)) {
            x = x1;
            y = y1;
        } else {
            coordinate();
        }
    }
    var a=1;
    function welcome() {
        drawrope();
        }

    function drawrope() {
        ctx.fillStyle = "#A0522D";
        ctx.fillRect(950*xratio, 450*yratio, 10*xratio, a*yratio);
        ctx.fillRect(1120*xratio, 450*yratio, 10*xratio, a*yratio);
        ctx.globalCompositeOperation="destination-over";
        a++;
        if (a<= 170) {
            setTimeout(drawrope, 1);
        }
        if (a===171) {
            ctx.globalCompositeOperation="source-over";
            ctx.drawImage(indicator, 930*xratio, 600*yratio, 220*xratio, 80*yratio);
            ctx.drawImage(come, 940*xratio, 600*yratio, 210*xratio, 70*yratio);

        }
    }
};
</script>
</body>
</html>